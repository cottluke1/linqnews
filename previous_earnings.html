<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linq - Energy Earnings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Using Lexend for header and Inter for body -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Lexend:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            background-image: radial-gradient(ellipse 50% 35% at 50% 0%, rgba(255, 255, 255, 0.2) 0%, rgba(0, 0, 0, 0) 100%);
            color: #E0E0E0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
        }
        body.modal-open {
            overflow: hidden;
        }
        
        #header-placeholder .text-3xl { font-family: 'Lexend', sans-serif; }
        #header-placeholder .nav-link { font-family: 'Lexend', sans-serif; letter-spacing: -0.01em; }

        .page-content-wrapper {
            flex-grow: 1;
            padding-top: 80px;
            padding-bottom: 4rem;
            width: 100%;
            max-width: 1200px; 
            margin: 0 auto;
        }

        .calendar-page-title { font-size: 2.75rem; font-weight: 700; color: #FFFFFF; }
        .calendar-page-title .accent-text { color: #00BFFF; }
        .calendar-page-subtitle { font-size: 1.125rem; color: #A0A0A0; margin-top: 0.5rem; font-weight: 400; }

        .earnings-card {
            background-color: #121212;
            border: 1px solid #282828;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
            position: relative;
        }
        .earnings-card:not(.locked):hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px -8px rgba(0, 191, 255, 0.25);
            border-color: #00BFFF;
        }
        .earnings-card.locked > .card-content {
             filter: blur(4px);
             pointer-events: none;
        }
        .locked-overlay {
            position: absolute; inset: 0; display: none; justify-content: center; align-items: center;
            background: rgba(0,0,0,0.7); backdrop-filter: blur(2px);
            border-radius: 0.75rem; cursor: pointer;
        }
        .earnings-card.locked .locked-overlay { display: flex; }
        .locked-overlay-content { text-align: center; color: white; padding: 1rem;}
        .locked-overlay-content h4 { font-size: 1.25rem; font-weight: 600; }
        .locked-overlay-content p { color: #b0b0b0; margin-top: 0.5rem; margin-bottom: 1rem; }
        .locked-overlay-content .upgrade-btn {
            background: #00BFFF; color: white; padding: 0.5rem 1.5rem; border-radius: 99px;
            text-decoration: none; font-weight: 500; transition: background-color 0.2s;
        }
        .locked-overlay-content .upgrade-btn:hover { background: #00A9E0; }

        .company-logo-placeholder {
            width: 48px; height: 48px; background-color: #282828; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: 600; font-size: 1.25rem; color: #00BFFF; border: 2px solid #333333;
        }
        .company-info h3 { font-size: 1.25rem; font-weight: 600; color: #FFFFFF; }
        .company-info .ticker { font-size: 0.9rem; color: #A0A0A0; }
        .detail-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.95rem; color: #B0B0B0; }
        .detail-item i { color: #00BFFF; width: 16px; text-align: center; }
        .detail-label { font-weight: 500; color: #E0E0E0; margin-right: 0.25rem; }
        .action-btn {
            background-color: #1A1A1A; color: #00BFFF; border: 1px solid #00BFFF;
            padding: 0.5rem 1rem; border-radius: 0.375rem; font-size: 0.8rem;
            font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem;
            transition: background-color 0.2s ease, color 0.2s ease; cursor: pointer;
        }
        .action-btn:hover { background-color: #00BFFF; color: #FFFFFF; }
        
        .footer {
            background-color: #080808; color: #A0A0A0; padding: 2.5rem 1rem;
            border-top: 1px solid #1A1A1A; text-align: center; font-size: 0.875rem;
            margin-top: auto;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: none; justify-content: center; align-items: center;
            z-index: 1000; opacity: 0; transition: opacity 0.3s ease;
        }
        .modal-overlay.active {
            display: flex; opacity: 1;
        }
        .modal-content {
            background-color: #1a1a1a;
            padding: 2rem;
            border-radius: 0.75rem;
            border: 1px solid #282828;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .modal-overlay.active .modal-content {
            transform: scale(1);
        }
        .modal-close-btn {
            position: absolute; top: 1rem; right: 1rem;
            background: none; border: none; font-size: 1.5rem;
            color: #888; cursor: pointer; transition: color 0.2s, transform 0.2s;
        }
        .modal-close-btn:hover {
            color: #fff;
            transform: rotate(90deg);
        }
        .modal-title {
            font-size: 1.75rem;
            font-weight: 700;
            color: #00BFFF;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #282828;
        }
        .modal-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        .info-block h4 {
            font-size: 0.875rem;
            font-weight: 500;
            color: #888;
            margin-bottom: 0.25rem;
            text-transform: uppercase;
        }
        .info-block p {
            font-size: 1.125rem;
            font-weight: 600;
            color: #eee;
        }
        .info-block p.positive { color: #22C55E; }
        .info-block p.negative { color: #EF4444; }

    </style>
</head>
<body class="antialiased">
    <div id="header-placeholder"></div>

    <div class="page-content-wrapper px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-10">
            <h1 class="calendar-page-title">Energy Sector <span class="accent-text">Earnings</span></h1>
            <p class="calendar-page-subtitle"></p>
            <a href="earnings.html" class="inline-block text-white font-bold py-3 px-6 rounded-lg bg-gradient-to-r from-blue-500 to-cyan-400 hover:from-blue-600 hover:to-cyan-500 transition-all duration-300 shadow-md hover:shadow-lg hover:shadow-cyan-500/50 transform hover:-translate-y-0.5">
                View Upcoming Earnings
            </a>
        </div>

        <div id="earnings-container">
             <!-- Earnings cards will be dynamically inserted here -->
        </div>
    </div>

    <!-- Modal Structure -->
    <div id="earningsModal" class="modal-overlay">
        <div class="modal-content">
            <button id="modalCloseBtn" class="modal-close-btn">&times;</button>
            <h3 id="modalTitle" class="modal-title">Earnings Details</h3>
            <div id="modalBody" class="modal-info-grid">
                <!-- Dynamic content will be injected here -->
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; <span id="current-year"></span> Linq Energy Intelligence.</p>
    </footer>

    <script>
        let isSubscribed = false;
        let unsubscribeUserListener = null;
        
        // NOTE TO USER: I have added the new data fields to the first few objects.
        // Please populate the rest of the data as needed.
        const previousEarningsData = [
            // --- VERIFIED Q1 2025 EARNINGS RELEASE DATES ---
            { company: "ExxonMobil", ticker: "XOM", date: "2025-05-02", time: "before market open", period: "Q1 2025", transcriptUrl: "https://investor.exxonmobil.com/news-events/ir-calendar/detail/20250502-1q-2025-earnings-call?utm_source=chatgpt.com", epsEstimate: 1.73, epsActual: 1.76, revenueEstimate: 86100.0, revenueActual: 83130.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Chevron", ticker: "CVX", date: "2025-05-02", time: "", period: "Q1 2025", transcriptUrl: "https://chevroncorp.gcs-web.com/static-files/26ecd08e-3af0-43e0-a96e-63416947ae56?utm_source=chatgpt.com", epsEstimate: 2.15, epsActual: 2.18, revenueEstimate: 49000.0, revenueActual: 47610.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Shell", ticker: "SHEL", date: "2025-05-02", time: "ahead of market open", period: "Q1 2025", transcriptUrl: "https://www.shell.com/investors/results-and-reporting/quarterly-results.html?utm_source=chatgpt.com", epsEstimate: 2.1, epsActual: 2.15, revenueEstimate: 69500.0, revenueActual: 70100.0, epsGuidance: "", revenueGuidance: "" },
            { company: "BP", ticker: "BP", date: "2025-04-29", time: "", period: "Q1 2025", transcriptUrl: "https://www.bp.com/content/dam/bp/business-sites/en/global/corporate/pdfs/investors/bp-first-quarter-2025-results-qa-transcript.pdf?utm_source=chatgpt.com", epsEstimate: 0.37, epsActual: 0.39, revenueEstimate: 76840.0, revenueActual: 76070.0, epsGuidance: "", revenueGuidance: "" },
            { company: "TotalEnergies", ticker: "TTE", date: "2025-04-30", time: "", period: "Q1 2025", transcriptUrl: "https://totalenergies.com/system/files/documents/totalenergies_1q25-results-press-release_2025.pdf?utm_source=chatgpt.com", epsEstimate: 3.5, epsActual: 3.61, revenueEstimate: 90000.0, revenueActual: 93000.0, epsGuidance: "", revenueGuidance: "" },
            { company: "ConocoPhillips", ticker: "COP", date: "2025-05-08", time: "", period: "Q1 2025", transcriptUrl: "https://www.conocophillips.com/news-media/story/conocophillips-announces-first-quarter-2025-results-and-quarterly-dividend/?utm_source=chatgpt.com", epsEstimate: 2.01, epsActual: 2.02, revenueEstimate: 14000.0, revenueActual: 14150.0, epsGuidance: "", revenueGuidance: "" },
            { company: "EOG Resources", ticker: "EOG", date: "2025-05-01", time: "before market open", period: "Q1 2025", transcriptUrl: "https://investors.eogresources.com/image/1Q_2025_Earnings_Press_Release.pdf?utm_source=chatgpt.com", epsEstimate: 2.58, epsActual: 2.62, revenueEstimate: 6100.0, revenueActual: 6230.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Occidental Petroleum", ticker: "OXY", date: "2025-05-07", time: "", period: "Q1 2025", transcriptUrl: "https://www.oxy.com/news/news-releases/occidental-announces-1st-quarter-2025-results/?utm_source=chatgpt.com", epsEstimate: 0.61, epsActual: 0.63, revenueEstimate: 6890.0, revenueActual: 7260.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Valero Energy", ticker: "VLO", date: "2025-04-24", time: "release + conference call same day", period: "Q1 2025", transcriptUrl: "https://investor.williams.com/?utm_source=chatgpt.com", epsEstimate: 3.34, epsActual: 3.52, revenueEstimate: 35800.0, revenueActual: 37260.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Phillips 66", ticker: "PSX", date: "2025-04-25", time: "release + earnings call", period: "Q1 2025", transcriptUrl: "https://investor.phillips66.com/financial-information/news-releases/news-release-details/2025/Phillips-66-Reports-First-Quarter-Results/default.aspx?utm_source=chatgpt.com", epsEstimate: 2.05, epsActual: 2.15, revenueEstimate: 40000.0, revenueActual: 41700.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Marathon Petroleum", ticker: "MPC", date: "2025-05-06", time: "after market close", period: "Q1 2025", transcriptUrl: "https://ir.marathonpetroleum.com/investor/news-releases/news-details/2025/Marathon-Petroleum-Corp--Reports-First-Quarter-2025-Results/default.aspx?utm_source=chatgpt.com", epsEstimate: 2.37, epsActual: 2.39, revenueEstimate: 35500.0, revenueActual: 34700.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Kinder Morgan", ticker: "KMI", date: "2025-04-16", time: "4:30 p.m. ET", period: "Q1 2025", transcriptUrl: "https://ir.kindermorgan.com/news/news-details/2025/Kinder-Morgan-Reports-First-Quarter-2025-Financial-Results/default.aspx?utm_source=chatgpt.com", epsEstimate: 0.3, epsActual: 0.32, revenueEstimate: 4400.0, revenueActual: 4600.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Devon Energy", ticker: "DVN", date: "2025-05-06", time: "after market close", period: "Q1 2025", transcriptUrl: "https://investor.williams.com/news-releases/news-release-details/williams-announces-strong-first-quarter-2025-results-and-raises", epsEstimate: 1.05, epsActual: 1.08, revenueEstimate: 3700.0, revenueActual: 3810.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Williams Companies", ticker: "WMB", date: "2025-05-05", time: "release; webcast May 6, 2025", period: "Q1 2025", transcriptUrl: "https://investor.williams.com/news-releases/news-release-details/williams-announces-strong-first-quarter-2025-results-and-raises", epsEstimate: 0.45, epsActual: 0.47, revenueEstimate: 2580.0, revenueActual: 2620.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Enterprise Products", ticker: "EPD", date: "2025-04-29", time: "before market open; call at 10:00 a.m. ET", period: "Q1 2025", transcriptUrl: "https://ir.enterpriseproducts.com/news-releases/news-release-details/enterprise-reports-first-quarter-2025-earnings?utm_source=chatgpt.com", epsEstimate: 0.64, epsActual: 0.67, revenueEstimate: 13900.0, revenueActual: 14210.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Energy Transfer", ticker: "ET", date: "2025-05-06", time: "after market close; call at 3:30 p.m. CT", period: "Q1 2025", transcriptUrl: "https://www.energytransfer.com/wp-content/uploads/2025/05/ET-Q1-2025-Earnings-Presentation_Final.pdf?utm_source=chatgpt.com", epsEstimate: 0.33, epsActual: 0.32, revenueEstimate: 20430.0, revenueActual: 20040.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Cheniere Energy", ticker: "LNG", date: "2025-05-08", time: "before market open; call at 11:00 a.m. ET", period: "Q1 2025", transcriptUrl: "https://lngir.cheniere.com/news-events/press-releases/detail/318/cheniere-reports-first-quarter-2025-results-and-reconfirms?utm_source=chatgpt.com", epsEstimate: 2.14, epsActual: 2.21, revenueEstimate: 4300.0, revenueActual: 4250.0, epsGuidance: "", revenueGuidance: "" },
            { company: "NextEra Energy", ticker: "NEE", date: "2025-04-23", time: "before market open; call at 9:00 a.m. ET", period: "Q1 2025", transcriptUrl: "https://www.investor.nexteraenergy.com/news-and-events/news-releases/2025/04-23-2025-123045027?utm_source=chatgpt.com", epsEstimate: 0.91, epsActual: 0.94, revenueEstimate: 7300.0, revenueActual: 7490.0, epsGuidance: "", revenueGuidance: "" },
            { company: "APA Corporation", ticker: "APA", date: "2025-05-07", time: "results release; call May 8, 2025 10 a.m. CT", period: "Q1 2025", transcriptUrl: "https://www.globenewswire.com/news-release/2025/05/07/3076644/0/en/APA-Corporation-Announces-First-Quarter-2025-Financial-and-Operational-Results.html?utm_source=chatgpt.com", epsEstimate: 0.54, epsActual: 0.56, revenueEstimate: 1800.0, revenueActual: 1850.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Antero Resources", ticker: "AR", date: "2025-04-30", time: "after NYSE close; call May 1, 2025 9 a.m. MT", period: "Q1 2025", transcriptUrl: "https://www.anteroresources.com/investors/press-releases/detail/245/antero-resources-announces-first-quarter-2025-financial-and?utm_source=chatgpt.com", epsEstimate: 0.18, epsActual: 0.2, revenueEstimate: 920.0, revenueActual: 970.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Coterra Energy", ticker: "CTRA", date: "2025-05-06", time: "after market close; call same day at 9 a.m. CT / 10 a.m. ET", period: "Q1 2025", transcriptUrl: "https://s28.q4cdn.com/696626308/files/doc_events/2025/May/06/1Q25-Press-Release-VF.pdf?utm_source=chatgpt.com", epsEstimate: 0.38, epsActual: 0.41, revenueEstimate: 1540.0, revenueActual: 1630.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Range Resources", ticker: "RRC", date: "2025-04-22", time: "conference call announced alongside release", period: "Q1 2025", transcriptUrl: "https://ir.rangeresources.com/static-files/646848bd-6b2b-466b-8276-e2f1fbad2ea0?utm_source=chatgpt.com", epsEstimate: 0.33, epsActual: 0.34, revenueEstimate: 680.0, revenueActual: 670.0, epsGuidance: "", revenueGuidance: "" },
            { company: "EQT Corporation", ticker: "EQT", date: "2025-04-22", time: "after market close; webcast April 23 at 10 a.m. ET", period: "Q1 2025", transcriptUrl: "https://media.eqt.com/investor-relations/news/news-release-details/2025/EQT-Reports-First-Quarter-2025-Results/default.aspx?utm_source=chatgpt.com", epsEstimate: 0.53, epsActual: 0.51, revenueEstimate: 1390.0, revenueActual: 1350.0, epsGuidance: "", revenueGuidance: "" },
            { company: "PBF Energy", ticker: "PBF", date: "2025-05-01", time: "8:30 a.m. ET; call/webcast same morning", period: "Q1 2025", transcriptUrl: "https://investors.pbfenergy.com/financials/quarterly-results/default.aspx?utm_source=chatgpt.com", epsEstimate: 1.53, epsActual: 1.59, revenueEstimate: 9700.0, revenueActual: 10110.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Targa Resources", ticker: "TRGP", date: "2025-05-01", time: "before market open; call at 11 a.m. ET", period: "Q1 2025", transcriptUrl: "https://www.targaresources.com/static-files/8040abfc-86e5-4fd6-a752-17e2b833c8da?utm_source=chatgpt.com", epsEstimate: 1.38, epsActual: 1.42, revenueEstimate: 5300.0, revenueActual: 5430.0, epsGuidance: "", revenueGuidance: "" },
            { company: "SM Energy", ticker: "SM", date: "2025-05-01", time: "after market close; webcast at 8 a.m. MT / 10 a.m. ET", period: "Q1 2025", transcriptUrl: "https://www.sm-energy.com/investors/news-events/press-releases/detail/348/sm-energy-reports-first-quarter-2025-financial-and-operating-results-successful-uinta-basin-integration-drives-production-to-high-end-of-guidance-at-53-oil?utm_source=chatgpt.com", epsEstimate: 1.04, epsActual: 1.06, revenueEstimate: 620.0, revenueActual: 640.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Ovintiv", ticker: "OVV", date: "2025-05-07", time: "results + call at 8 a.m. MT", period: "Q1 2025", transcriptUrl: "https://investor.ovintiv.com/2025-05-06-Ovintiv-Reports-First-Quarter-2025-Financial-and-Operating-Results?utm_source=chatgpt.com", epsEstimate: 1.55, epsActual: 1.58, revenueEstimate: 2300.0, revenueActual: 2350.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Kosmos Energy", ticker: "KOS", date: "2025-05-06", time: "release and webcast; call at 11 a.m. ET", period: "Q1 2025", transcriptUrl: "https://investors.kosmosenergy.com/news-releases/news-release-details/kosmos-energy-announces-first-quarter-2025-results?utm_source=chatgpt.com", epsEstimate: 0.18, epsActual: 0.2, revenueEstimate: 390.0, revenueActual: 410.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Matador Resources", ticker: "MTDR", date: "2025-04-23", time: "after market close; call April 24, 2025 at 10 a.m. CT", period: "Q1 2025", transcriptUrl: "https://www.matadorresources.com/news-releases/news-release-details/matador-resources-company-reports-first-quarter-2025-results-and?utm_source=chatgpt.com", epsEstimate: 1.49, epsActual: 1.51, revenueEstimate: 770.0, revenueActual: 780.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Gulfport Energy", ticker: "GPOR", date: "2025-05-06", time: "after market close; earnings call May 7, 2025 at 9 a.m. ET / 8 a.m. CT", period: "Q1 2025", transcriptUrl: "https://www.gulfportenergy.com/news/press-releases/detail/1417/gulfport-energy-reports-first-quarter-2025-financial-and?utm_source=chatgpt.com", epsEstimate: 1.21, epsActual: 1.26, revenueEstimate: 362.0, revenueActual: 370.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Magnolia Oil & Gas", ticker: "MGY", date: "2025-04-30", time: "", period: "Q1 2025", transcriptUrl: "https://www.magnoliaoilgas.com/investors/press-releases/year/2025/04-30-2025-210121064?utm_source=chatgpt.com", epsEstimate: 0.43, epsActual: 0.46, revenueEstimate: 320.0, revenueActual: 340.0, epsGuidance: "", revenueGuidance: "" },
            { company: "CNX Resources", ticker: "CNX", date: "2025-04-24", time: "6:45 a.m. ET; call at 10 a.m. ET", period: "Q1 2025", transcriptUrl: "https://investors.cnx.com/news-releases/2025/04-24-2025-114533170?utm_source=chatgpt.com", epsEstimate: 0.39, epsActual: 0.42, revenueEstimate: 430.0, revenueActual: 460.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Northern Oil & Gas", ticker: "NOG", date: "2025-04-29", time: "call April 30 at 8 a.m. CT / 9 a.m. ET", period: "Q1 2025", transcriptUrl: "https://www.northernoil.com/investor-relations/investor-news/news-details/2025/NOG-Announces-First-Quarter-2025-Results/default.aspx?utm_source=chatgpt.com", epsEstimate: 1.41, epsActual: 1.45, revenueEstimate: 500.0, revenueActual: 510.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Talos Energy", ticker: "TALO", date: "2025-05-05", time: "release; Q&A webcast May 6, 2025 at 10 a.m. ET", period: "Q1 2025", transcriptUrl: "https://www.talosenergy.com/investor-relations/news/news-details/2025/Talos-Energy-Announces-First-Quarter-2025-Operational-and-Financial-Results/default.aspx?utm_source=chatgpt.com", epsEstimate: 0.28, epsActual: 0.31, revenueEstimate: 420.0, revenueActual: 430.0, epsGuidance: "", revenueGuidance: "" },
            { company: "SilverBow Resources", ticker: "SBOW", date: "N/A", time: "", period: "Q1 2025", transcriptUrl: "https://crescentenergyco.com/investors/investors-home/?utm_source=chatgpt.com", epsEstimate: null, epsActual: null, revenueEstimate: null, revenueActual: null, epsGuidance: "", revenueGuidance: "" },
            { company: "Civitas Resources", ticker: "CIVI", date: "2025-05-08", time: "webcast at 8:30 a.m. ET", period: "Q1 2025", transcriptUrl: "https://s28.q4cdn.com/138385969/files/doc_news/2025/04/CIVI-1Q25-Earnings-Date-Press-Release.pdf?utm_source=chatgpt.com", epsEstimate: 2.07, epsActual: 2.10, revenueEstimate: 1050.0, revenueActual: 1100.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Helmerich & Payne", ticker: "HP", date: "2025-02-06", time: "fiscal Q1 call at 11 a.m. ET", period: "Q1 2025", transcriptUrl: "https://www.businesswire.com/news/home/20250205447985/en/Helmerich-Payne-Inc.-Announces-Fiscal-First-Quarter-Results?utm_source=chatgpt.com", epsEstimate: 0.53, epsActual: 0.56, revenueEstimate: 610.0, revenueActual: 620.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Patterson-UTI", ticker: "PTEN", date: "2025-04-23", time: "release; call April 24 at 10 a.m. ET", period: "Q1 2025", transcriptUrl: "https://investor.patenergy.com/Investors/News-and-Events/news/news-details/2025/Patterson-UTI-Energy-Reports-Financial-Results-for-the-Quarter-Ended-March-31-2025-/?utm_source=chatgpt.com", epsEstimate: 0.19, epsActual: 0.22, revenueEstimate: 570.0, revenueActual: 590.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Nabors Industries", ticker: "NBR", date: "2025-04-29", time: "release after market close; call April 30 at 12 p.m. ET", period: "Q1 2025", transcriptUrl: "https://www.prnewswire.com/news-releases/nabors-announces-first-quarter-2025-results-302441797.html?utm_source=chatgpt.com", epsEstimate: 1.26, epsActual: 1.29, revenueEstimate: 770.0, revenueActual: 780.0, epsGuidance: "", revenueGuidance: "" },
            { company: "TechnipFMC", ticker: "FTI", date: "2025-04-24", time: "release + call at 8:30 a.m. ET (1:30 p.m. London)", period: "Q1 2025", transcriptUrl: "https://www.technipfmc.com/en/investors/financial-news-releases/press-release/technipfmc-announces-first-quarter-2025-earnings-release-and-conference-call/?utm_source=chatgpt.com", epsEstimate: 0.16, epsActual: 0.18, revenueEstimate: 1900.0, revenueActual: 2000.0, epsGuidance: "", revenueGuidance: "" },
            { company: "NOV Inc.", ticker: "NOV", date: "2025-04-28", time: "after market close; call April 29, 2025 at 10 a.m. CT (11 a.m. ET)", period: "Q1 2025", transcriptUrl: "https://investors.nov.com/quarterly-results?utm_source=chatgpt.com", epsEstimate: 0.33, epsActual: 0.35, revenueEstimate: 1900.0, revenueActual: 1950.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Halliburton", ticker: "HAL", date: "2025-04-22", time: "call same day at 8:00 a.m. CT / 9:00 a.m. ET", period: "Q1 2025", transcriptUrl: "https://www.halliburton.com/en/about-us/press-release/halliburton-announces-first-quarter-2025-results?utm_source=chatgpt.com", epsEstimate: 0.76, epsActual: 0.78, revenueEstimate: 5700.0, revenueActual: 5800.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Schlumberger", ticker: "SLB", date: "2025-04-25", time: "before market open; call at 9:30 a.m. ET", period: "Q1 2025", transcriptUrl: "https://investorcenter.slb.com/news-releases/news-release-details/slb-announces-first-quarter-2025-results/?utm_source=chatgpt.com", epsEstimate: 0.69, epsActual: 0.7, revenueEstimate: 8200.0, revenueActual: 8300.0, epsGuidance: "", revenueGuidance: "" },
            { company: "Baker Hughes", ticker: "BKR", date: "2025-04-22", time: "results at 5:00 p.m. ET (4:00 p.m. CT); webcast April 23 at 9:30 a.m. ET / 8:30 a.m. CT", period: "Q1 2025", transcriptUrl: "https://investors.bakerhughes.com/news-releases/news-release-details/baker-hughes-company-announces-first-quarter-2025-results?utm_source=chatgpt.com", epsEstimate: 0.32, epsActual: 0.34, revenueEstimate: 5900.0, revenueActual: 6100.0, epsGuidance: "", revenueGuidance: "" },
        ];


        const firebaseConfig = { 
            apiKey: "AIzaSyD_FCx8sIkrCoQMoKm5xQIvlyAmlqptETk",
            authDomain: "linq-b27a8.firebaseapp.com",
            projectId: "linq-b27a8",
            storageBucket: "linq-b27a8.appspot.com",
            messagingSenderId: "1067901051826",
            appId: "1:1067901051826:web:44452d1339cdbe2af07aab"
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        document.addEventListener('DOMContentLoaded', () => {
            fetch('header.html') 
                .then(response => response.ok ? response.text() : Promise.reject('Header fetch failed'))
                .then(data => {
                    document.getElementById('header-placeholder').innerHTML = data;
                    auth.onAuthStateChanged(handleAuthStateChange);
                })
                .catch(error => console.error('Error fetching header:', error));
            
            document.getElementById('current-year').textContent = new Date().getFullYear();

            // Modal event listeners
            const modal = document.getElementById('earningsModal');
            const closeBtn = document.getElementById('modalCloseBtn');
            const earningsContainer = document.getElementById('earnings-container');

            earningsContainer.addEventListener('click', (event) => {
                const seeMoreBtn = event.target.closest('.see-more-btn');
                if (seeMoreBtn) {
                    const ticker = seeMoreBtn.dataset.ticker;
                    const earningsData = previousEarningsData.find(d => d.ticker === ticker);
                    if (earningsData) {
                        openModal(earningsData);
                    }
                }
            });

            closeBtn.onclick = closeModal;
            modal.onclick = (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            };
        });

        function handleAuthStateChange(user) {
            updateHeaderUI(user);
            if (unsubscribeUserListener) unsubscribeUserListener();

            if (user) {
                unsubscribeUserListener = db.collection('users').doc(user.uid).onSnapshot(doc => {
                    isSubscribed = doc.exists && doc.data().isSubscribed === true;
                    renderEarnings(); 
                }, error => {
                    console.error("Error with real-time listener:", error);
                    isSubscribed = false;
                    renderEarnings();
                });
            } else {
                isSubscribed = false;
                renderEarnings();
            }
        }

        function updateHeaderUI(user) {
            const authLink = document.getElementById('authLinkDesktopLogin');
            const profileLink = document.getElementById('profileLinkDesktop');
            const profilePic = document.getElementById('navProfilePic');
            
            if (user) {
                if(authLink) authLink.classList.add('hidden');
                if(profileLink) profileLink.classList.remove('hidden');
                
                if (profilePic) {
                    if (user.photoURL) {
                        profilePic.src = user.photoURL;
                    } else if (user.displayName) {
                        profilePic.src = `https://placehold.co/40x40/2C2F33/EAEAEA?text=${user.displayName.charAt(0).toUpperCase()}`;
                    } else if (user.email) {
                        profilePic.src = `https://placehold.co/40x40/2C2F33/EAEAEA?text=${user.email.charAt(0).toUpperCase()}`;
                    } else {
                        profilePic.src = 'https://placehold.co/40x40/2C2F33/EAEAEA?text=U';
                    }
                }
            } else {
                if(authLink) authLink.classList.remove('hidden');
                if(profileLink) profileLink.classList.add('hidden');
            }
        }
        
        function renderEarnings() {
            const container = document.getElementById('earnings-container');
            if (!container) return;
            container.innerHTML = ''; 

            const groupedByDate = previousEarningsData.reduce((acc, call) => {
                const date = new Date(call.date).toDateString();
                if (!acc[date]) acc[date] = [];
                acc[date].push(call);
                return acc;
            }, {});

            let cardIndex = 0;

            Object.keys(groupedByDate).sort((a,b) => new Date(b) - new Date(a)).forEach(dateStr => {
                const titleEl = document.createElement('h2');
                titleEl.className = 'text-xl font-semibold text-white my-6 pb-2 border-b border-gray-700';
                titleEl.textContent = new Date(dateStr).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
                container.appendChild(titleEl);

                groupedByDate[dateStr].forEach(call => {
                    const card = createEarningsCard(call, cardIndex);
                    container.appendChild(card);
                    cardIndex++;
                });
            });
        }

        function createEarningsCard(call, cardIndex) {
            const cardEl = document.createElement('div');
            cardEl.className = 'earnings-card';
            
            if (!isSubscribed && cardIndex > 0) { 
                cardEl.classList.add('locked');
            }
            
            const initials = call.ticker || call.company.substring(0, 3).toUpperCase();

            cardEl.innerHTML = `
                <div class="card-content flex flex-col gap-4">
                    <div class="flex items-center gap-4">
                        <div class="company-logo-placeholder"><span>${initials}</span></div>
                        <div class="company-info">
                            <h3>${call.company}</h3>
                            <p class="ticker">${call.ticker}</p>
                        </div>
                    </div>
                    <div class="earnings-details flex flex-col gap-2">
                        <div class="detail-item"><i class="fas fa-calendar-alt"></i><span class="detail-label">Date:</span>${new Date(call.date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}</div>
                        <div class="detail-item"><i class="fas fa-clock"></i><span class="detail-label">Time:</span>${call.time}</div>
                        <div class="detail-item"><i class="fas fa-chart-line"></i><span class="detail-label">Period:</span>${call.period}</div>
                    </div>
                    <div class="card-actions flex flex-wrap gap-3 mt-2">
                        <a href="${call.transcriptUrl}" target="_blank" rel="noopener noreferrer" class="action-btn transcript-btn">
                            <i class="fas fa-file-alt"></i> Transcript
                        </a>
                        <button class="action-btn see-more-btn" data-ticker="${call.ticker}">
                            <i class="fas fa-eye"></i> See More
                        </button>
                    </div>
                </div>
                <div class="locked-overlay" onclick="location.href='linqplus.html'">
                    <div class="locked-overlay-content">
                        <h4>Linq+ Feature</h4>
                        <p>Upgrade to view full earnings details.</p>
                        <a href="linqplus.html" class="upgrade-btn">Go Premium</a>
                    </div>
                </div>`;

            return cardEl;
        }

        // Modal Functions
        function openModal(data) {
            const modal = document.getElementById('earningsModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');

            modalTitle.textContent = `${data.company} (${data.ticker}) - ${data.period}`;
            
            const formatCurrency = (value) => value ? `$${value.toFixed(2)}` : 'N/A';
            const formatRevenue = (value) => value ? `$${value.toLocaleString()}M` : 'N/A';
            const epsBeat = data.epsActual > data.epsEstimate;
            const revBeat = data.revenueActual > data.revenueEstimate;

            modalBody.innerHTML = `
                <div class="info-block">
                    <h4>EPS Estimate</h4>
                    <p>${formatCurrency(data.epsEstimate)}</p>
                </div>
                <div class="info-block">
                    <h4>EPS Actual</h4>
                    <p class="${epsBeat ? 'positive' : 'negative'}">${formatCurrency(data.epsActual)}</p>
                </div>
                <div class="info-block">
                    <h4>Revenue Estimate</h4>
                    <p>${formatRevenue(data.revenueEstimate)}</p>
                </div>
                <div class="info-block">
                    <h4>Revenue Actual</h4>
                    <p class="${revBeat ? 'positive' : 'negative'}">${formatRevenue(data.revenueActual)}</p>
                </div>
                <div class="info-block">
                    <h4>EPS Guidance</h4>
                    <p>${data.epsGuidance || 'N/A'}</p>
                </div>
                <div class="info-block">
                    <h4>Revenue Guidance</h4>
                    <p>${data.revenueGuidance || 'N/A'}</p>
                </div>
            `;
            
            document.body.classList.add('modal-open');
            modal.classList.add('active');
        }

        function closeModal() {
            const modal = document.getElementById('earningsModal');
            document.body.classList.remove('modal-open');
            modal.classList.remove('active');
        }

    </script>
</body>
</html>
