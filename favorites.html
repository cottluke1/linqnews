<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linq - Your Bookmarks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <style>
        body {
            font-family: 'Lexend', sans-serif;
            background-color: #0A0A0A;
            color: #E0E0E0;
            font-weight: 400;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        body.overflow-hidden { overflow: hidden; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1A1A1A; }
        ::-webkit-scrollbar-thumb { background-color: #333333; border-radius: 10px; border: 2px solid #1A1A1A; }
        ::-webkit-scrollbar-thumb:hover { background-color: #4A4A4A; }

        /* Styles for the dynamically loaded header.html */
        nav.fixed {
            background-color: rgba(10, 10, 10, 0.85) !important;
            backdrop-filter: blur(10px) saturate(150%) !important;
            -webkit-backdrop-filter: blur(10px) saturate(150%) !important;
            border-bottom: 1px solid #222222 !important;
            position: fixed !important; top: 0 !important; left: 0 !important;
            width: 100% !important; z-index: 1000 !important; padding: 0.75rem 0 !important;
        }
        nav.fixed .container {
            display: flex !important; justify-content: space-between !important; align-items: center !important;
            width: 100% !important; max-width: 1280px !important;
            margin: 0 auto !important; padding: 0 1rem !important;
        }
        @media (min-width: 640px) { nav.fixed .container { padding: 0 1.5rem !important; } }
        @media (min-width: 1024px) { nav.fixed .container { padding: 0 2rem !important; } }
        .nav-link {
            transition: color 0.2s ease, opacity 0.2s ease, background-color 0.2s ease;
            font-weight: 500; color: #B0B0B0; opacity: 0.8;
            padding: 0.5rem 0.75rem; border-radius: 0.375rem; font-size: 0.875rem;
        }
        .nav-link:hover { color: #FFFFFF; opacity: 1; background-color: rgba(255,255,255,0.05); }
        .nav-link.active { color: #FFFFFF; opacity: 1; background-color: transparent; }
        #authLinkDesktopLogin.nav-link-button {
            background-color: #00BFFF; color: #FFFFFF !important; opacity: 1 !important; padding: 0.5rem 1rem;
        }
        #authLinkDesktopLogin.nav-link-button:hover { background-color: #00A9E0; opacity: 1; }
        .profile-icon-placeholder {
            width: 2.25rem; height: 2.25rem; background-color: #333; border-radius: 50%;
            display: inline-flex; align-items: center; justify-content: center;
            cursor: pointer; border: 2px solid #4A4A4A;
        }
        .profile-icon-placeholder svg { width: 1.25rem; height: 1.25rem; color: #B0B0B0; }
        .profile-icon-placeholder:hover { border-color: #00BFFF; }
        .desktop-hamburger-icon { cursor: pointer; padding: 0.375rem; color: #B0B0B0; border-radius: 0.25rem;}
        .desktop-hamburger-icon:hover { color: #FFFFFF; background-color: rgba(255,255,255,0.1); }
        .desktop-hamburger-icon svg { width: 1.5rem; height: 1.5rem; }
        .slide-out-panel {
            display: flex; flex-direction: column; position: fixed; top: 0; right: 0;
            width: 320px; height: 100vh; background-color: #18181B;
            box-shadow: -10px 0 30px rgba(0,0,0,0.4); z-index: 1001;
            transform: translateX(100%); transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            padding: 1.5rem; overflow-y: auto; border-left: 1px solid #3F3F46;
        }
        .slide-out-panel.open { transform: translateX(0); }
        .slide-out-panel-header {
            display: flex; justify-content: flex-end; align-items: center;
            padding-bottom: 1.25rem; margin-bottom: 1.25rem; border-bottom: 1px solid #3F3F46;
        }
        .slide-out-panel-close-btn {
            background: none; border: none; color: #A0A0A0; font-size: 1.875rem;
            cursor: pointer; padding: 0.25rem; line-height: 1;
            transition: color 0.2s ease, transform 0.2s ease;
        }
        .slide-out-panel-close-btn:hover { color: #FFFFFF; transform: rotate(90deg) scale(1.1); }
        .slide-out-panel-nav { flex-grow: 1; display: flex; flex-direction: column; }
        .slide-out-panel a {
            color: #D4D4D8; padding: 1rem 1.25rem; text-decoration: none; display: block;
            font-size: 0.95rem; font-weight: 500;
            transition: background-color 0.2s ease, color 0.2s ease, border-left-color 0.2s ease;
            border-left: 4px solid transparent; margin: 0.375rem 0; border-radius: 0.375rem;
        }
        .slide-out-panel a:hover { background-color: #27272A; color: #FFFFFF; border-left-color: #00BFFF; }
        .slide-out-panel #logoutButtonSlideout {
            color: #F87171 !important; margin-top: auto; padding-top: 1rem; border-top: 1px solid #3F3F46;
        }
        .slide-out-panel #logoutButtonSlideout:hover {
            background-color: rgba(248, 113, 113, 0.1); color: #FECACA !important; border-left-color: #F87171;
        }
        #menu-overlay {
            display: none; position: fixed; inset: 0;
            background-color: rgba(0, 0, 0, 0.65); z-index: 1000;
            opacity: 0; transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        #menu-overlay.active { display: block; opacity: 1; }
        /* End of Header specific styles */

        .page-content-wrapper {
            flex-grow: 1; padding-bottom: 4rem; width: 100%; max-width: 1200px;
            margin: 0 auto; padding-left: 1rem; padding-right: 1rem;
            padding-top: 80px; /* Default, will be adjusted by JS */
        }
        .page-main-title { /* Changed from .page-title to avoid conflict if header.html has .page-title */
            font-size: 2.5rem; font-weight: 700; color: #FFFFFF; margin-bottom: 1rem; text-align: center;
            text-shadow: 0px 2px 8px rgba(0, 191, 255, 0.25);
        }
        .page-main-title .accent-text { color: #00BFFF; }

        .favorites-grid-container {
            display: grid;
            grid-template-columns: 1fr; /* Single column by default for mobile */
            gap: 2rem; /* Gap between columns and rows */
            margin-top: 1.5rem;
        }
        @media (min-width: 1024px) { /* lg breakpoint */
            .favorites-grid-container {
                grid-template-columns: repeat(2, 1fr); /* Two columns on larger screens */
            }
        }
        .favorites-column h2 {
            font-size: 1.75rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #E5E7EB; /* text-gray-200 */
            margin-bottom: 1.5rem; /* mb-6 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 1px solid #374151; /* border-gray-700 */
        }

        /* News Card Styling (from index.html / original favorites) */
        .news-card {
            background-color: #0A0A0A; border-radius: 0.75rem; border: 1px solid #2D2D2D;
            box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.6); overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            margin-bottom: 1.5rem; display: flex; align-items: center; padding: 1rem;
        }
        .news-card:hover {
            transform: translateY(-4px); box-shadow: 0 12px 30px -10px rgba(0, 191, 255, 0.2);
            border-color: #00BFFF;
        }
        .news-source-logo-container {
            flex-shrink: 0; margin-right: 1rem; width: 50px; height: 50px;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; border-radius: 0.375rem;
            background-color: #18181b; /* Subtle background for logos */
        }
        .news-source-logo { max-width: 100%; max-height: 100%; object-fit: contain; }
        .news-content-wrapper { flex-grow: 1; display: flex; justify-content: space-between; align-items: flex-start; }
        .news-text-content {}
        .news-title { font-size: 1.1rem; font-weight: 500; color: #FFFFFF; margin-bottom: 0.25rem; line-height: 1.3; }
        .news-title a { color: #FFFFFF; transition: color 0.2s ease; }
        .news-title a:hover { color: #00BFFF; }
        .news-meta-tags { display: flex; flex-wrap: wrap; align-items: center; gap: 0.5rem; }
        .news-meta { font-size: 0.75rem; color: #888888; }
        .news-tag {
            background-color: rgba(0, 191, 255, 0.15); color: #00BFFF; padding: 0.25rem 0.6rem;
            border-radius: 9999px; font-size: 0.65rem; font-weight: 500;
            display: inline-block; border: 1px solid rgba(0, 191, 255, 0.3);
        }
        .favorite-btn-area { flex-shrink: 0; margin-left: 1rem; }
        .favorite-btn { /* This class is used by both news and community posts, ensure general applicability */
            color: #777777; cursor: pointer;
            transition: color 0.2s ease, transform 0.2s ease; background: none;
            border: none; padding: 0; display: inline-flex;
            align-items: center; justify-content: center;
        }
         /* Specific to news card favorite button size if needed, else general .favorite-btn applies */
        .news-card .favorite-btn {
             width: 1.5rem; height: 1.5rem;
        }
        .favorite-btn:hover { color: #00BFFF; transform: scale(1.15); }
        .favorite-btn.favorited { color: #00BFFF; }
        .favorite-btn.favorited svg { fill: #00BFFF; stroke: #00BFFF; } /* For news card SVG polygon */


        /* Community Post Card Styling (from community.html) */
        .post-card {
            background-color: #121212; border: 1px solid #282828; border-radius: 0.75rem;
            padding: 1.75rem; margin-bottom: 1.5rem; /* Consistent margin with news-card */
            transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
            box-shadow: 0 4px 15px -5px rgba(0,0,0,0.4); display: flex; flex-direction: column;
        }
        .post-card:hover {
            transform: translateY(-5px); box-shadow: 0 10px 30px -10px rgba(0, 191, 255, 0.2);
            border-color: #00BFFF;
        }
        .post-title { font-size: 1.375rem; font-weight: 600; color: #FFFFFF; margin: 0 0 0.75rem; line-height: 1.4; }
        .post-meta {
            font-size: 0.875rem; color: #A0A0A0; margin: 0 0 1rem; font-weight: 400;
            display: flex; align-items: center; flex-wrap: wrap;
        }
        .post-category-tag {
            background-color: rgba(0, 191, 255, 0.15); color: #00BFFF; padding: 0.3rem 0.875rem;
            border-radius: 1rem; font-size: 0.75rem; font-weight: 500;
            margin-left: 0.75rem; border: 1px solid rgba(0, 191, 255, 0.3);
        }
        /* Styles for the container of the Twitter embed, allowing the widget to control its own styling */
        .twitter-tweet-container {
            margin-top: 1rem;
            background-color: transparent; /* Let Twitter widget handle background */
            border-radius: 0.5rem; /* Optional: can be inherited from Twitter widget */
            padding: 0; /* Let Twitter widget handle padding */
            border: none; /* Let Twitter widget handle border */
        }
        .post-actions {
            display: flex; justify-content: flex-end; align-items: center;
            margin-top: 1.5rem; gap: 0.75rem; padding-top: 1rem; border-top: 1px solid #282828;
        }
        .action-btn { /* General styling for action buttons in post-card */
            background-color: transparent; border: 1px solid #333333; color: #A0A0A0;
            border-radius: 0.375rem; padding: 0.5rem 0.75rem; font-size: 0.875rem;
            font-weight: 500; cursor: pointer; transition: all 0.2s ease;
            display: inline-flex; align-items: center; gap: 0.5rem; /* default gap for icon and text */
        }
        .action-btn:hover { background-color: #1A1A1A; color: #00BFFF; border-color: #00BFFF; }
        .action-btn i { font-size: 1rem; /* Icon size */ }

        /* Community Post Favorite Button (Star Icon Only) */
        .post-card .favorite-btn { /* Inherits .action-btn, then .favorite-btn, then these specifics */
            padding: 0.5rem; /* Adjust padding for icon-only button if needed */
        }
        .post-card .favorite-btn i.fas { display: none; } /* Hide filled star by default */
        .post-card .favorite-btn i.far { display: inline-block; } /* Show empty star by default */
        .post-card .favorite-btn.favorited i.fas { display: inline-block; color: #00BFFF;} /* Show filled star when favorited */
        .post-card .favorite-btn.favorited i.far { display: none; } /* Hide empty star when favorited */
        .post-card .favorite-btn.favorited { /* Style for the button itself when favorited */
             color: #00BFFF;
             border-color: #00BFFF; /* Optional: match border color */
             background-color: rgba(0, 191, 255, 0.1); /* Optional: subtle background */
        }
        .post-card .share-btn {
            /* Specific styles for share button if needed, e.g., margin if gap isn't enough or specific icon alignment */
        }


        .no-favorites-message, .auth-message {
            text-align: center; color: #A0A0A0; font-size: 1.1rem; padding: 3rem 1rem;
            background-color: #121212; border-radius: 0.5rem; border: 1px solid #2a2a2a;
            margin-top: 2rem;
        }
        .auth-message a { color: #00BFFF; text-decoration: underline;}
        .auth-message a:hover { color: #00A9E0;}

        .footer {
            background-color: #080808; color: #A0A0A0; padding: 2.5rem 1rem;
            border-top: 1px solid #1A1A1A; text-align: center; font-size: 0.875rem; margin-top: auto;
        }
        .footer a { color: #B0B0B0; transition: color 0.2s ease; }
        .footer a:hover { color: #00BFFF; }
    </style>
</head>
<body class="antialiased">
    <div id="header-placeholder"></div>

    <main class="page-content-wrapper container mx-auto p-4 sm:p-6 lg:p-8">
        <div id="favoritesPageContent"> <h1 class="page-main-title">Your <span class="accent-text">Bookmarks</span></h1>

            <div class="favorites-grid-container">
                <div class="favorites-column" id="news-favorites-column">
                    <h2>News Articles</h2>
                    <div id="newsFavoritesGrid">
                        </div>
                </div>
                <div class="favorites-column" id="community-favorites-column">
                    <h2>Community Posts</h2>
                    <div id="communityFavoritesGrid">
                        </div>
                </div>
            </div>
        </div>

        <div id="authMessageContainer" class="hidden">
            <h1 class="page-main-title">Your <span class="accent-text">Bookmarks</span></h1>
            <div id="authMessage" class="auth-message">
                You must be logged in to view your bookmarks <a href="login.html" class="text-cyan-400 hover:underline">Login here</a>.
            </div>
        </div>
    </main>

    <footer class="footer text-center">
        <div class="container mx-auto">
            <p class="mb-2 text-sm">&copy; <span id="current-year"></span> Linq Energy Intelligence. All Rights Reserved.</p>
            <nav class="text-xs space-x-3 sm:space-x-4">
                <a href="#">Terms of Service</a> |
                <a href="#">Privacy Policy</a> |
                <a href="#">Contact Support</a>
            </nav>
        </div>
    </footer>

    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    <script>
        // --- Function to Initialize and Run All Header Related Logic ---
        function initializeHeaderAndAuth() {
            const authLinkDesktopLogin = document.getElementById('authLinkDesktopLogin');
            const profileAndMenuDesktop = document.getElementById('profileAndMenuDesktop');
            const authLinkMobile = document.getElementById('authLinkMobile');
            const logoutButtonMobile = document.getElementById('logoutButtonMobile');
            const favoritesLinkMobile = document.getElementById('favoritesLinkMobile');
            const linqAiLinkMobile = document.getElementById('linqAiLinkMobile');
            const earningsLinkMobile = document.getElementById('earningsLinkMobile');
            const desktopSlideOutMenu = document.getElementById('desktop-slideout-menu');
            const menuOverlay = document.getElementById('menu-overlay');
            const logoutButtonDesktopSlideout = document.getElementById('logoutButtonSlideout');
            const desktopHamburgerButton = document.getElementById('desktop-hamburger-button');
            const slideoutCloseButton = document.getElementById('slideout-close-button');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            const firebaseConfig = {
                apiKey: "AIzaSyD_FCx8sIkrCoQMoKm5xQIvlyAmlqptETk", // IMPORTANT: Keep your API keys secure and consider environment variables for production.
                authDomain: "linq-b27a8.firebaseapp.com",
                projectId: "linq-b27a8",
                storageBucket: "linq-b27a8.appspot.com",
                messagingSenderId: "1067901051826",
                appId: "1:1067901051826:web:44452d1339cdbe2af07aab"
            };
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            const authInstance = firebase.auth();

            authInstance.onAuthStateChanged(user => {
                const favoritesPageContent = document.getElementById('favoritesPageContent');
                const authMessageContainer = document.getElementById('authMessageContainer');

                if (user) {
                    if (authLinkDesktopLogin) authLinkDesktopLogin.classList.add('hidden');
                    if (profileAndMenuDesktop) {
                        profileAndMenuDesktop.classList.remove('hidden');
                        profileAndMenuDesktop.classList.add('flex');
                    }
                    if (authLinkMobile) {
                        authLinkMobile.textContent = "My Profile";
                        authLinkMobile.href = "profile.html";
                    }
                    if (logoutButtonMobile) logoutButtonMobile.classList.remove('hidden');
                    if (favoritesLinkMobile) favoritesLinkMobile.classList.remove('hidden');
                    if (linqAiLinkMobile) linqAiLinkMobile.classList.remove('hidden');
                    if (earningsLinkMobile) earningsLinkMobile.classList.remove('hidden');

                    if(favoritesPageContent) favoritesPageContent.classList.remove('hidden');
                    if(authMessageContainer) authMessageContainer.classList.add('hidden');
                    displayFavoriteArticles();
                    displayFavoriteCommunityPosts();

                } else {
                    if (authLinkDesktopLogin) {
                        authLinkDesktopLogin.classList.remove('hidden');
                        authLinkDesktopLogin.classList.add('nav-link-button');
                    }
                    if (profileAndMenuDesktop) profileAndMenuDesktop.classList.add('hidden');
                    if (authLinkMobile) {
                        authLinkMobile.textContent = "Login";
                        authLinkMobile.href = "login.html";
                    }
                    if (logoutButtonMobile) logoutButtonMobile.classList.add('hidden');
                    if (favoritesLinkMobile) favoritesLinkMobile.classList.add('hidden');
                    if (linqAiLinkMobile) linqAiLinkMobile.classList.add('hidden');
                    if (earningsLinkMobile) earningsLinkMobile.classList.add('hidden');
                    if (desktopSlideOutMenu && desktopSlideOutMenu.classList.contains('open')) {
                        closeDesktopMenu();
                    }
                    if(favoritesPageContent) favoritesPageContent.classList.add('hidden');
                    if(authMessageContainer) authMessageContainer.classList.remove('hidden');
                }
                setActiveNavLink();
            });

            function handleLogout(e) {
                e.preventDefault();
                if (desktopSlideOutMenu && desktopSlideOutMenu.classList.contains('open')) closeDesktopMenu();
                if (mobileMenu && !mobileMenu.classList.contains('hidden')) mobileMenu.classList.add('hidden');
                authInstance.signOut().then(() => {
                    console.log("User signed out");
                    window.location.href = 'index.html';
                }).catch(error => console.error("Sign out error", error));
            }

            if (logoutButtonDesktopSlideout) logoutButtonDesktopSlideout.addEventListener('click', handleLogout);
            if (logoutButtonMobile) logoutButtonMobile.addEventListener('click', handleLogout);

            function setActiveNavLink() {
                const currentPath = window.location.pathname.split("/").pop() || "index.html";
                const navLinks = document.querySelectorAll('#header-placeholder nav.fixed a.nav-link, #header-placeholder #mobile-menu a.nav-link');

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    const linkHref = link.getAttribute('href');
                    if (linkHref === currentPath) {
                        link.classList.add('active');
                    }
                    else if ((currentPath === "index.html" || currentPath === "") && (linkHref === "index.html" || link.dataset.page === "index" || link.dataset.page === "index-mobile")) {
                        link.classList.add('active');
                    }
                    else if (currentPath === "favorites.html" && linkHref === "favorites.html") {
                         link.classList.add('active');
                    }
                });
            }

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            }

            function openDesktopMenu() {
                if (desktopSlideOutMenu) desktopSlideOutMenu.classList.add('open');
                if (menuOverlay) menuOverlay.classList.add('active');
                document.body.classList.add('overflow-hidden');
            }
            function closeDesktopMenu() {
                if (desktopSlideOutMenu) desktopSlideOutMenu.classList.remove('open');
                if (menuOverlay) menuOverlay.classList.remove('active');
                document.body.classList.remove('overflow-hidden');
            }
            if (desktopHamburgerButton) {
                desktopHamburgerButton.addEventListener('click', (event) => {
                    event.stopPropagation();
                    if (desktopSlideOutMenu && desktopSlideOutMenu.classList.contains('open')) closeDesktopMenu();
                    else openDesktopMenu();
                });
            }
            if (menuOverlay) menuOverlay.addEventListener('click', closeDesktopMenu);
            if (slideoutCloseButton) slideoutCloseButton.addEventListener('click', closeDesktopMenu);
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && desktopSlideOutMenu && desktopSlideOutMenu.classList.contains('open')) closeDesktopMenu();
            });

            setActiveNavLink();
        }

        fetch('header.html')
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok for header.html');
            return response.text();
        })
        .then(data => {
            const headerPlaceholder = document.getElementById('header-placeholder');
            if (headerPlaceholder) {
                headerPlaceholder.innerHTML = data;
    
                initializeHeaderAndAuth();
    
                const fixedHeader = headerPlaceholder.querySelector('nav.fixed');
                if (fixedHeader) {
                    document.querySelector('.page-content-wrapper').style.paddingTop = (fixedHeader.offsetHeight + 20) + 'px';
                }
    
                // ✅ Set user avatar in header
                firebase.auth().onAuthStateChanged(user => {
                    const avatarImg = document.getElementById('navProfilePic');
                    if (avatarImg && user) {
                        if (user.photoURL) {
                            avatarImg.src = user.photoURL;
                        } else if (user.displayName) {
                            const initials = user.displayName.charAt(0).toUpperCase();
                            avatarImg.src = `https://placehold.co/40x40/2C2F33/EAEAEA?text=${initials}`;
                        }
                    }
                });
    
            } else {
                console.error('Header placeholder element not found.');
            }
        })
        .catch(error => {
            console.error('Error fetching header:', error);
            const headerPlaceholder = document.getElementById('header-placeholder');
            if (headerPlaceholder) {
                headerPlaceholder.innerHTML = "<p class='text-red-500 text-center py-3'>Error loading navigation.</p>";
            }
        });

        document.getElementById('current-year').textContent = new Date().getFullYear();

        // Define constants for default article images for each source
        // ** IMPORTANT: Replace these placeholder URLs with your actual image URLs **
        const REUTERS_ARTICLE_IMAGE = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTb6lvykJKGImtGYCRe-6TY7ElBaV452dtP7GXx-zo9ltbKKRXWE-u7lATyYO-b4Dv7iz8&usqp=CAU';
        const BLOOMBERG_ARTICLE_IMAGE = 'data:image/png;base64,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';
        const CNBC_ARTICLE_IMAGE = 'https://media.licdn.com/dms/image/v2/C4D12AQGHNUBg3TqxiQ/article-cover_image-shrink_720_1280/article-cover_image-shrink_720_1280/0/1540231293132?e=2147483647&v=beta&t=qxOH2M8Eto-nXdisUVSs1V3CH8yVWwiotTQJT_ncTbQ';
        const FORBES_ARTICLE_IMAGE = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSWpyAdajaUF-RGcmTT8cYnLr4JUsgSZ90RVQ&s';
        const BBCNEWS_ARTICLE_IMAGE = 'https://www.chrisevansmp.com/wp-content/uploads/2023/08/BBC_News_2019.svg.png';
        const SEEKINGALPHA_ARTICLE_IMAGE = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgQEhUQERASFhUSEhAWERcWCw8VGBYWFhUXFxgVFRUYHSggGBoxHRUVITEhJSktLi4uFx8zODMsNyktLy0BCgoKDg0OGxAQFy0iICYrLS0xMistLS0tNy0tLSstLTAtLy0tLS0uLS8tNSstLS0tLS0tLS0tLSsvLS0rKy0tLf/AABEIAOEA4QMBEQACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAAAgYDBQcEAf/EAEEQAAIBAgIFCQQIBQMFAAAAAAABAgMRBAYFITFBcRIiUVJhgZGhwROCkrEjMkJicqKy0TNzwuHwNEPSBxREY4P/xAAbAQEAAwEBAQEAAAAAAAAAAAAAAQUGAgQDB//EADgRAQABAgMDCgUDBAIDAAAAAAABAgMEBRESITETQVFhcYGRscHRIjKh4fAjQvEzNGJyJFMUFVL/2gAMAwEAAhEDEQA/ALBc/Nm0LgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgLgfbnSETlIEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAACR05RZDp8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJnTlBkOgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkdIQCQhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkdOUbh0XAXAXAXAXAXAXAXAXALXqERM7oGeOBxj1qjVf8A8Z/sfeMLfnfFufCXym/ajjXHjDHVo1o/WhKP4oSXzR867Nyj5qZjth3TXTV8sxPZLHc4dPtwFwFwFwFwFwFwFwFwFwFwFwFwFwPpKEQkCQAAAAAAHr0fo7F13anG9tsnqiuL9FrPThsHdxE6W47+Z8L+Jt2Y1rn3WjAZTwsddWTm+hNxj5a34mgw+S2qN92dqfCFLeza5VutxpHjPs3mHwmGpq0KcY8IJFtbs27caUUxHYrbl2u5OtdUz2sx9HzfGkxpqNbjdA6Oq7aai+tDmvy1PvR4b+W4e9xp0npjc9lnH37fCrWOid6q6Wy9iqF5R58OlLWvxR9V5GexmVXbHxU/FT9fBd4XMLd74Z3VfnBp7lWsAAAAyYahUqTjTj9aTSX78N/cfSzaqu1xRTxlxcri3TNdXCF8pZd0YopOkm0km3KV2+l6zX0ZXhYpiJoiWZqzHETMzFWjQZqw+Ao8mnSppSfOk7y1R2Ja3vd/Ap82tYezEUW6IiZ3933WmW3L13WuurWOHerxSLUAAAAACRLlAl0EAAAAAAG+y/l+Ve1SrdU9y2Of7R7d+7pLnL8rm9+pd3U+f2VmOzCLPwUb6vL7rrRo04RUYRUUtiSsjT0UU0Rs0xpDO111VztVTrKOKxNGlFzqSUYre35dr7CLl2i3TtVzpCbduu5Vs0RrKsY7N72UafvTv5RXqyiv53pus098+y5s5Pz3au6PdrKmZdLP/cS4UoeqZ4Ks2xUzuq07Ij11e2Mtw0ft175ToZp0nHa4z/FTS842OrecYmn5pirtj20cV5Xh6uETHZPvqsOisyYSs1CX0c3sTepv7sunsZdYTNLV/wCGfhq6/SVVictuWY2qfij6+DdlmrlTzJl9JOtRj2zgl4yivmjP5llnG7Zjtj1heZfmGulq7PZPpPuqpnV2AALbkzRtk8RJa3eNPhvl6dz6TSZNhNmOXq590diizbE6zyNPbPpC0Skkm27JK74F7MxEaypoiZnSHNNJ4x16s6vWfN7IrUl4GHxd+b96q508OzmbDD2Ys2oo6PPneU8z7AAAAAASOkIMaOgaANAGgDQBoN3lnQ/t5cua+jg9f35dXh0+Ba5ZgeXq264+GPrKtzDGchTs0/NP0jp9l7SS1GrZlixmKpUoSqTdoxV36Jdp87t2m1RNdc7ofS1aqu1xRTxlzvSuk6+Jnyp6kvqRvqivV9LMdi8XXia9qrhzQ1eGwtGHo2ae+el4jyaPSDQBoA0Fsyvp6TaoVne+qnJv8sn8n3GiyzMZqmLN2d/NPpKjzHARETdtx2x6x6rWXyjUbNeiVRn7WC5lR611ZdHB7fEy2a4Lkq+Uoj4Z+k/dpctxfK0bFXzR9Y+zQlRos3q0Xgp16saS365Poitr/wA3tHpwuGm/diiO/sfDE34s25rn8l0qjShCKjFWUUkl0Jakja00xTTFMcIZCqqaqpqnjLTZvxvs6HIT51V8n3dsvLV7xW5tf5OxNMcat3dzrDK7PKXtqeFO/v5vfuUQyejTA0AaANAGgDQBoJEuUGHQAAAAMuEw9SrONOO2bSXZ0vwu+4+lm1VdriinjLi7cpt0TXVwh0zBYWnRhGnDZFW49Lfa3d95t7Nqm1RFFPCGOvXartc11cZZz6PmpWc9IudRUIvm09cu2bXon5szWcYnbri1HCOPb9miynD7NvlZ4zw7Pv6K4Uq2AAAAAuSOhZa0n/3FLnPnw5s+3ol3rzua/L8Vy9rWeMbp9+9lcww3IXd3Cd8e3c92kMJTrU5UpbJK1+h7muDsz1X7NN63NFXO81i9Nq5FcczmVanOEpQlqcW1LijEV0TRVNNXGGyoqiumKqeErxlPRnsaXtJLn1bPhH7K473x7DUZXhORtbdXzVeXMzeZ4rlbmxTwp8+dvS0VigZsxvtcQ4r6tJcha9+2T8dXumTzW9yl+aY4U7vf86mpyyzydiJ56t/t797TFY94AAAAAACR0hBh0DQBoA0AaC05HwSbnXa2cyHF2cn8l3svclsb6rs9keqkzi9pFNqO2fRcDQKFixNaNOEpvZCMpPglc4uVxRTNU80au7dE11xTHPOjltWrOcnOW2TcnxbuYeuqa6pqnjO9tKaIppimOEbkTnR0DQBoA0AaANBt8rY32WIim+bU5ku/6r8bLvZY5Zf5K/Ec1W72+rwZjY5WxPTG/wB/o6EaxlVfxuX41cWqzS9nyU5rrTjqSt0Wtfh2lXey6LmKi7Py6b+2FpazCbeFm3Hza7uyVgLRVvPpHFRo0p1H9iLfF7l42Plfuxat1VzzQ+ti1N25TRHPLl8pSbbbu222+lvW2YiZmZ1ls4iIjSHwjRINAGgDQBoA0AaCRKEGSkCQAAuB0jLuG9lh6cba3FSlxlzn87dxsMDa5PD009WvjvZDHXeUxFU9enhubI9byNNm6vyMNNddwj4vX5JlfmlezhquvSFhldG1iY6tZ/O9z4yjVAAAAAAACk1rW1a1x3DWY3wjSJ3S6ngMQqtOFTrwjLxRt7NzlLdNfTGrF3rfJ3KqOidGc+j5AFZzzi+TThSW2pK7/DD+7j4FPnN3S3FuOefpH30XGT2tblVyeaPrP21UszjRAAAAAAAAEiXKBOjoI0AaANBkw9LlzjDryjH4ml6ndujbrinpmIc11bFM1dETPg6sklqNuw76BV8+VPo6cemo34Rf/Ips5q/Tpjr9FzktP6lU9XqphntGhBoA0AaANAGgDQBoOg5Pq8rCwXVlOP5m15NGqyurXDU9WsfVls1p2cTPXpP0bosFcAc+zdieXiZLdTUYLjblPzdu4y2aXNvETHRu9Wqyu1sYeJ6d/o0pXaLAGgDQBoA0AaANAGgkdIQDoAAANhl6HKxNFffv8KcvQ9WBp1xFEdfo8uOq2cPXPV57nTDXMcAVDP0v4K/mv9JR5z+yO30X2SR889nqqRRr0AAAAAAAAvGRJfQTXRWl+iBosnn9GqP8vSGbzmP1qZ/x9ZWQtlQ+SaSu9xEzomI1nRyjEVnUnKo/tylL4m36mLuVbdc1dMzPi3FFGxTFHRER4MZw6AAAAAAABoJEoQJ0SBIAA22Vf9VS4z/RI9uXf3NPf5S8OZf2tfd5w6OalkQCn5/TvRf81fpKTOI+Se30X2STurjs9VSKRfAAAAAAAAF3yEvoaj/9z/RA0GT/ANKr/b0hm86/rU/6+srMWyneDTtZww9WXRTlbi1ZfM8+Lr2LFdXVL04KjbxFEdcOYmQ0bMJAAAAAAAAaCRLlAl0EAAA2OXanJxVF/ft8ScfU9WCnTEUT1+kvLjqdrDVx1eW9001bGgFXz7TbpU5dWo18UX+yKnN6dbdM9E+i6yWrS5VT0x5SpJQNEAAAAAAAAX7I8LYa/WqTfhaP9Jo8qjSxr0zPszGcTriNOiI91gLJVNNm6VsJU7eQvzxPFmM/8eru81hlca4qnv8AKXOjLtYAAAAAAAAAJHWiEA6AAACdCs4SjPqSjL4Wn6HVFWxVFXROrmujbpmnpiY8XW4tNXW/YbGJ1YWY03PoQ1Ga8P7TC1OmCU17j5T8kzx5hRt4erq3+G978subGJp693ju83NzMNcAAAAAAAAdKytR5GFpLpi5fG3L1NRgKNnD0x1a+O9kMxr2sTXPXp4bm1PW8LS5wTeEqdjpv88Tw5jGuHq7vNYZVP8Ayqe/ylzozTWgAAAAAAAACRKEGSkCQAAA6VlbF+1w1N31wXIlxhq+Vn3mmwNzlLFM9G7wY/MrPJ4ironf4tset4UZxjJNNXTTT4MiY1jSUxMxOsOUY/Cyo1J0n9iTXFbU/BpmSu2+TrmieZuLN2Ltum5HPH8/VgOH1AAAAAAnQoyqSjTjtnKMV7ztfzOqaJrqimOfc4rriima55o18HWqVOMYqK2RSS4JWNdTERGkMNVVNVU1TzpkuXh05QdTD1YLa6crcUrrzR8MVRt2aqY6Hpwdzk79FU9MOWJoyravoACVKnOTUYxcpPYlFtvgkTTTNU6RGsuaqopjWqdI632vRqU5OE01KOqSe7Vf1JqommdmqNJRRXTXTFVM6xKBy7AAACROjlAaOgaANAGgDQWTI+kVTqujJ82r9X8a/dX8EWWW3ti5sTwnz/hUZxh9u1FyONPl9p85X0vmYAKhnrRjdsTFbEo1eF+bLxbXeugqMzw+ul2OyfRfZNitNbFXbHrCmlNo0ANAGgDQBoA0FmyPo5zquu1zaV1Htm1byTfxIs8tsbVfKTwjz/hT5xidi3yUcauPZ958l7L1mWOvXpU0nOSScoxV3tcnZLxZzVVFMazLui3VXOlMa8/gyHThyvTWBdCvOnbUpXh+CWuP7dxlsTZ5K7NPh2fm5tcJfi/Zpr5+ftjj7vEfDR6QaC5/9PqXNrT6ZQj8Kb/rLnKad1dXZHh/LP55V8VFPVM+P8NPnOnycVJ9aNOXlyf6TyZjTpiJ64iXvymrawsdUzHr6tIeHRYg0AaANBI60QgHQAAAAPsZSTTTaaaaa2prWmhG7fCJiJjSXTMu6XhiqSbsqkbKou3rLse3y3GkwmIi9RrzxxY/H4OcNc0/bPD86YbU9TwoVacJxcZJOMk1JNamntTIqpiqNJ4OqappmKqZ0mHNsw6Fq4We905P6OW33ZPrfPxM5isLNmr/AB5vZr8DjacTR0VRxj1jq8mpPK9wAAAe3ROjMRiZ8iC1fblbVFdL7ehb/Fn2sWKr1WzT3y82KxNGHo2q+6On86XTcBg6NCnGlBWjFd7e9vtb1mktW6bdEU08IY6/eqvVzXXxlkxFelTi5zkoxiryb3I6qqimJqqnSHNFFVdUU0xrMub5i01VxU7q8YQ/hq9nfrv73y8TO4vEzfq3bojh79vk12BwVOGo0nfVPH27PNf9D46OIowq75R5y6JLVJeKZfYe7ytuK/zXnZbFWJsXqrfR5czW5t0NLEU1OmvpKd7LrR3x471/c82Ow3K07VPzR+aPZlmNixXs1z8M/Sen3+znhQNWAdJylg5UsNC6s53m/e2flUTRYG3sWY14zv8AFkMzvRcxE6cI3eH31VnPf+pj/Jh+qZW5n/Wjs91xk39vP+0+UK4V63AAACRKECUhAAAAAD1aOx+Iw9RVabs1tW6S3xl2H1tXarVW1S+N+xRfomiuN35vh0fQumcLio3g7SX14N64/uu00GHxNF6NY49DI4vBXMNVpVw5p5v56myPQ8jHiKFKpFwnFSjJWaaumc1UxVGzVGsO6LlVFUVUzpMKdpTJdRNyw8011JvWuxT39/iVN7LZ4257p91/hs6pmNL0d8e3t4NJUy/peOp4efc4S+TPHOEvx+yfosacww08LkfVOllvTMv9hrtlUpr1uTTgr8/t8nNWZYWn9/hE+zdaPyTK6deordWn6zfou89lrLJ43Ku6PdX387jhap759vutmDweHoxVOnBRity+be1vtZaW7dNunZpjSFFdvV3atqudZQ0jpDC4eHLqySW7e5Poit7Iu3qLVO1XLqxh7l+rZtxr+c7nmntO4jFSs+bTT5sL/ml0vyXmUGJxVV+eiOj3avBYGjDU9NXPPt1ebUnle5Z8kaVVOo6E3zarvDsn0d680ukssuv7FXJzwnh2/f8AOKmzjC8pRytMb6ePZ9vzgvhdsy0Gm8rYXEN1IP2dR7Wo3jLtlHp7V5nhxGBouztRulaYPNLliNiqNqn6x2S12jclcmalXqRlFO/JjF87sk3u7Dz2ss0q1uTrHQ9eIzrWjS1TpPTPouBbKBzXN+IVTFTtsgow8Fd+cn4Gex1W1fnq3NfldvYw1OvPrLTHjWAAAASOkIMOgAAAAAAE6NWpCSnCTjJbGnZommZpnWJ0lzXRTXTs1RrC16KzpNWjiIcr78Ek/ejsfd4FnZzGY3XI749vzsUeJyWJ32Z06p9J9/FZ8DpnR1b+HWg31XK0vhessbeItXPlqj1U17B37Pz0T6ePB7z7PMAAPPjMdhKKvVqQgvvTSvwW8+dd2iiNap0fW1YuXZ0opmexWNKZ1prm4eHKfXmmorhHa++xX3syjhbjXrlc4bJap33p06o4+PDzVHGYvEVpcupNyl0t7OxLYl2Iq666rk7VU6yvrVmi1Ts0RpDAcPoAL/5cC/ZYzLTrJUa0kqq1JvUqn7S7N+7oV3hMZFcRRXPxef3ZfMctqtTNy1GtPl9vyVmLBTgGpzBpujhYbU6kk/Zwv+Z9ETzYnE02aevmj85nuwOCrxNfRTHGfzncylKTbbd222297ettmdnWZ1lsYiIjSOD4EgAABIlyiw6fAAAAAAAAABpMaJejD47GU/qVakeFWSXhex3Tcrp+WqY73yrsWq/moie6HrWYdML/AMifhTfzifX/AMq//wDc/T2ef/1+F/64+vuxVtM6Tn9bEVXwqOP6bHM4i7Vxrn87H0pweHp4W48NfN4Xtvve17/E+PPq9HNoAAAAAAY0S2eE0/pWkuTGtKy2KSjO3xK56KMVeo3RV6vHdy/DXJ1qojXq3eTJVzNpmSt7Zr8NOmn42OqsZfn93k4pyzC0zrseMz7tVOcpNyk229rbbb4t7TzTMzOsvbFMUxpEaQiQkAAAAEyUIMOgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkShBkpAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASJcoMJAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASCESUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIlCISEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+nSAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD6EP//Z';


        const sourcePlaceholders = { // This is primarily for logos if article.image isn't specific enough or for fallback
            'Reuters': { bgColor: 'FF8000', textColor: 'FFFFFF', text: 'RTRS', logoUrl: 'https://www.reuters.com/pf/resources/images/reuters/logo-horizontal-dark.svg?d=107' },
            'Bloomberg': { bgColor: '000000', textColor: '007bff', text: 'BBG', logoUrl: 'https://assets.bwbx.io/images/users/ui/bloomberg-logo-light/1.0.1/img/logo.png' },
            'CNBC': { bgColor: '000000', textColor: 'FFFFFF', text: 'CNBC', logoUrl: 'https://www.cnbc.com/nbcuni_brand_logos/cnbc/CNBC_Logo_Horizontal_REV.png' },
            'Forbes': { bgColor: '222222', textColor: 'ffffff', text: 'FRBS', logoUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Forbes_logo_white.svg/200px-Forbes_logo_white.svg.png' },
            'BBC News': { bgColor: 'BB1919', textColor: 'FFFFFF', text: 'BBC', logoUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/BBC_News_2022.svg/512px-BBC_News_2022.svg.png' },
            'Seeking Alpha': { bgColor: 'F39200', textColor: '000000', text: 'SA', logoUrl: 'https://static.seekingalpha.com/assets/images/layout/seeking_alpha_logo_200x38_negative.png' },
        };
        const genericPlaceholderColors = ['00BFFF', '4B0082', '800080', 'FF1493', 'FF8C00', '20B2AA', 'DA70D6'];


        const articlesData = [
            // The 'image' property below now uses the constants defined above.
            // Replace these with specific article image URLs if available, otherwise they'll use the source's default image.
            { id: "1", category: 'Crude Oil', title: 'Oil Prices Surge Amid Supply Concerns', date: 'May 10, 2025', source: 'Reuters', link: '#', image: REUTERS_ARTICLE_IMAGE },
            { id: "2", category: 'Crude Oil', title: 'OPEC+ Extends Production Cuts', date: 'May 9, 2025', source: 'Bloomberg', link: '#', image: BLOOMBERG_ARTICLE_IMAGE },
            { id: "3", category: 'Natural Gas', title: 'Global Demand for Crude Hits Record', date: 'May 10, 2025', source: 'CNBC', link: '#', image: CNBC_ARTICLE_IMAGE },
            { id: "4", category: 'Petrochemicals', title: 'Petrochemical Demand Shifts with New Green Policies', date: 'May 8, 2025', source: 'Forbes', link: '#', image: FORBES_ARTICLE_IMAGE },
            { id: "5", category: 'Power', title: 'Global Power Grids Under Strain from Extreme Weather Events', date: 'May 10, 2025', source: 'BBC News', link: '#', image: BBCNEWS_ARTICLE_IMAGE },
            { id: "6", category: 'Renewables', title: 'Solar Panel Efficiency Reaches New Heights, Driving Adoption', date: 'May 9, 2025', source: 'Seeking Alpha', link: '#', image: SEEKINGALPHA_ARTICLE_IMAGE },
        ];
        let newsFavorites = JSON.parse(localStorage.getItem('linqFavoritesV2')) || [];

        const communityPostsDataPage = [
            { id: 'tweet1', url: 'https://twitter.com/CRUDEOIL231/status/1919070053825495266', title: 'Saudi Production Levels & Brent Impact', meta: 'May 10, 2025 • JH (@CRUDEOIL231)', category: 'Crude oil', tweetContent: '<p lang="en" dir="ltr">If Saudis and OPEC+ maintain production levels... unlikely. Brent $110-$120 this summer - book it. Inventory builds not high enough to offset demand increases as we move into driving season. Refineries are already warning about diesel shortages in Europe too... wild summer ahead.</p>&mdash; JH (@CRUDEOIL231) <a href="https://twitter.com/CRUDEOIL231/status/1919070053825495266?ref_src=twsrc%5Etfw">May 4, 2025</a>' },
            { id: 'tweet2', url: 'https://twitter.com/LinqNews/status/1919171857409855978', title: "India's Rising Oil Consumption", meta: 'May 10, 2025 • Linq AI Insights (@LinqAI)', category: 'Energy Demand', tweetContent: '<p lang="en" dir="ltr">India\'s oil consumption rose 4.5% YoY in April to 4.9 million bpd, driven by strong factory activity and travel demand. Gasoline sales up 11%, diesel +3%. Signals robust economic momentum. <a href="https://twitter.com/search?q=%23OOTT&amp;src=ctag&amp;ref_src=twsrc%5Etfw">#OOTT</a> <a href="https://twitter.com/search?q=%23IndiaEnergy&amp;src=ctag&amp;ref_src=twsrc%5Etfw">#IndiaEnergy</a></p>&mdash; Linq AI Insights (@LinqAI) <a href="https://twitter.com/LinqNews/status/1919171857409855978?ref_src=twsrc%5Etfw">May 4, 2025</a>' },
            { id: 'tweet3', url: 'https://twitter.com/Rory_Johnston/status/1919158874172530712', title: 'Crude Gaps Down on OPEC+ News', meta: 'May 09, 2025 • Rory Johnston (@Rory_Johnston)', category: 'Market Analysis', tweetContent: '<p lang="en" dir="ltr">Crude gaps down >$2/bbl at the Asia open on reports that OPEC+ is considering exempting Russia from its production targets. Fascinating development given the existing strains on Russian output and the potential signal it sends about managing global supply. <a href="https://twitter.com/search?q=%23OPEC&amp;src=ctag&amp;ref_src=twsrc%5Etfw">#OPEC</a> <a href="https://twitter.com/search?q=%23OilPrice&amp;src=ctag&amp;ref_src=twsrc%5Etfw">#OilPrice</a></p>&mdash; Rory Johnston (@Rory_Johnston) <a href="https://twitter.com/Rory_Johnston/status/1919158874172530712?ref_src=twsrc%5Etfw">May 4, 2025</a>'},
            { id: 'tweet4', url: 'https://twitter.com/aeberman12/status/1919396685362373026', title: 'Riyadh’s Strategic Oil Play', meta: 'May 05, 2025 • Art Berman (@aeberman12)', category: 'Energy', tweetContent: '<p lang="en" dir="ltr">My take: Riyadh is betting that high prices won’t destroy demand enough to matter before their expanded capacity comes online. A risky game, but they\'ve played it before. The real question is global recession risk. <a href="https://twitter.com/search?q=%23OilStrategy&amp;src=ctag&amp;ref_src=twsrc%5Etfw">#OilStrategy</a> <a href="https://twitter.com/search?q=%23EnergyMarkets&amp;src=ctag&amp;ref_src=twsrc%5Etfw">#EnergyMarkets</a></p>&mdash; Art Berman (@aeberman12) <a href="https://twitter.com/aeberman12/status/1919396685362373026?ref_src=twsrc%5Etfw">May 5, 2025</a>'},
            { id: 'tweet5', url: 'https://twitter.com/IPAAaccess/status/1919510569553432731', title: 'IPAA Supports Budget Provisions', meta: 'May 05, 2025 • IPAA American Energy (@IPAAaccess)', category: 'Policy', tweetContent: '<p lang="en" dir="ltr">IPAA and a coalition of energy trade groups wrote to House leadership today urging support for budget provisions that promote domestic oil and natural gas production. Essential for American energy security and economic strength. Read it here: [link] <a href="https://twitter.com/search?q=%23USenergy&amp;src=ctag&amp;ref_src=twsrc%5Etfw">#USenergy</a></p>&mdash; IPAA American Energy (@IPAAaccess) <a href="https://twitter.com/IPAAaccess/status/1919510569553432731?ref_src=twsrc%5Etfw">May 5, 2025</a>'}
        ];
        let communityFavorites = JSON.parse(localStorage.getItem('linqCommunityFavoritesV1')) || [];


        function displayFavoriteArticles() {
            const newsFavoritesGrid = document.getElementById('newsFavoritesGrid');
            if (!newsFavoritesGrid) return;
            newsFavoritesGrid.innerHTML = '';
            const favoritedArticlesDetails = articlesData.filter(article => newsFavorites.includes(String(article.id)));

            if (favoritedArticlesDetails.length === 0) {
                newsFavoritesGrid.innerHTML = '<p class="no-favorites-message col-span-full">You haven\'t favorited any news articles yet. <a href="index.html" class="text-cyan-400 hover:underline">Explore News</a></p>';
                return;
            }
            favoritedArticlesDetails.forEach((article, index) => {
                const articleElement = document.createElement('div');
                articleElement.className = 'news-card';

                let imageUrl;
                const sourceInfo = sourcePlaceholders[article.source];

                // 1. Use article.image (which is now populated with specific or default article images from constants)
                if (article.image && article.image.trim() !== '') {
                    imageUrl = article.image;
                }
                // 2. Else, if article.image was somehow empty or a placeholder (it shouldn't be if constants are set),
                //    fallback to source logo from sourcePlaceholders.
                else if (sourceInfo && sourceInfo.logoUrl && sourceInfo.logoUrl.trim() !== '' && !sourceInfo.logoUrl.startsWith('YOUR_')) {
                    imageUrl = sourceInfo.logoUrl;
                }
                // 3. Else, generate a text placeholder
                else {
                    if (sourceInfo && sourceInfo.bgColor && sourceInfo.textColor && sourceInfo.text) {
                        imageUrl = `https://placehold.co/50x50/${sourceInfo.bgColor}/${sourceInfo.textColor}?text=${encodeURIComponent(sourceInfo.text)}&font=Lexend`;
                    } else {
                        const colorIndex = index % genericPlaceholderColors.length;
                        const bgColor = genericPlaceholderColors[colorIndex];
                        const textColor = 'FFFFFF'; // Default white text for generic placeholders
                        const sourceInitial = article.source ? encodeURIComponent(article.source.charAt(0).toUpperCase()) : 'N';
                        imageUrl = `https://placehold.co/50x50/${bgColor}/${textColor}?text=${sourceInitial}&font=Lexend`;
                    }
                }

                articleElement.innerHTML = `
                    <div class="news-source-logo-container">
                        <img src="${imageUrl}" alt="${article.source || 'Source'} Logo" class="news-source-logo" onerror="this.onerror=null; this.src='https://placehold.co/50x50/cccccc/333333?text=Err&font=Lexend'; this.alt='Image error fallback';">
                    </div>
                    <div class="news-content-wrapper">
                        <div class="news-text-content">
                            <h3 class="news-title"><a href="${article.link || '#'}" target="_blank" rel="noopener noreferrer">${article.title || 'Untitled Article'}</a></h3>
                            <div class="news-meta-tags">
                                <p class="news-meta">${article.date || 'N/A Date'} &bull; ${article.source || 'N/A Source'}</p>
                                <span class="news-tag">${article.category || 'General'}</span>
                            </div>
                        </div>
                        <div class="favorite-btn-area">
                            <button class="favorite-btn favorited" data-id="${article.id}" data-type="news" aria-label="Unfavorite article">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                            </button>
                        </div>
                    </div>`;
                newsFavoritesGrid.appendChild(articleElement);
            });
            addFavoriteButtonListeners();
        }

        function displayFavoriteCommunityPosts() {
            const communityFavoritesGrid = document.getElementById('communityFavoritesGrid');
            if (!communityFavoritesGrid) return;
            communityFavoritesGrid.innerHTML = '';
            const favoritedCommunityPosts = communityPostsDataPage.filter(post => communityFavorites.includes(String(post.id)));

            if (favoritedCommunityPosts.length === 0) {
                communityFavoritesGrid.innerHTML = '<p class="no-favorites-message col-span-full">You haven\'t favorited any community posts yet. <a href="community.html" class="text-cyan-400 hover:underline">Explore Community</a></p>';
                return;
            }
            favoritedCommunityPosts.forEach(post => {
                const postElement = document.createElement('article');
                postElement.className = 'post-card';
                postElement.setAttribute('data-id', post.id);
                const tweetContentHTML = typeof post.tweetContent === 'string' ? post.tweetContent : '<p>Could not load tweet content.</p>';

                postElement.innerHTML = `
                    <p class="post-title">${post.title || 'Untitled Post'}</p>
                    <p class="post-meta">${post.meta || 'N/A'} <span class="post-category-tag">${post.category || 'General'}</span></p>
                    <div class="twitter-tweet-container">
                        <blockquote class="twitter-tweet" data-theme="dark" data-cards="hidden" data-conversation="none">${tweetContentHTML}</blockquote>
                    </div>
                    <div class="post-actions">
                        <button class="action-btn favorite-btn favorited" data-id="${post.id}" data-type="community" aria-label="Toggle Favorite">
                            <i class="far fa-star"></i><i class="fas fa-star"></i>
                        </button>
                        <button class="action-btn share-btn" data-url="${post.url || '#'}" data-title="${post.title || 'Untitled Post'}">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                        <span class="share-confirmation hidden" style="margin-left: auto; margin-right: 0.5rem;">Link copied!</span>
                    </div>`;
                communityFavoritesGrid.appendChild(postElement);
            });

            if (window.twttr && window.twttr.widgets) {
                window.twttr.widgets.load(communityFavoritesGrid);
            } else {
                console.log("Twitter widgets API (twttr.widgets) not available yet or still loading. Tweets may not render correctly immediately.");
            }
            addFavoriteButtonListeners();
        }


        function toggleFavoriteOnFavoritesPage(articleId, type) {
            const idStr = String(articleId);
            if (type === 'news') {
                const index = newsFavorites.indexOf(idStr);
                if (index > -1) newsFavorites.splice(index, 1);
                localStorage.setItem('linqFavoritesV2', JSON.stringify(newsFavorites));
                displayFavoriteArticles();
            } else if (type === 'community') {
                const index = communityFavorites.indexOf(idStr);
                if (index > -1) communityFavorites.splice(index, 1);
                localStorage.setItem('linqCommunityFavoritesV1', JSON.stringify(communityFavorites));
                displayFavoriteCommunityPosts();
            }
        }

        function addFavoriteButtonListeners() {
            document.querySelectorAll('#newsFavoritesGrid .favorite-btn, #communityFavoritesGrid .favorite-btn').forEach(button => {
                button.removeEventListener('click', handleUnfavoriteClick); // Prevent multiple listeners
                button.addEventListener('click', handleUnfavoriteClick);
            });
        }

        function handleUnfavoriteClick(event) {
            const button = event.currentTarget;
            const articleId = button.getAttribute('data-id');
            const type = button.getAttribute('data-type'); // 'news' or 'community'
            toggleFavoriteOnFavoritesPage(articleId, type);
        }
    </script>
</body>
</html>
