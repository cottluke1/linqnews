<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Profile Picture Centered Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <nav class="fixed top-0 left-0 w-full z-[1000] shadow-md py-3 bg-black">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between">
      <!-- Logo -->
      <a href="#" class="text-3xl font-bold text-white">Linq</a>
      <!-- Centered Nav Links -->
      <div class="hidden md:flex flex-1 justify-center space-x-8">
        <a href="#" class="nav-link text-sm text-white hover:text-cyan-400 transition">News</a>
        <a href="#" class="nav-link text-sm text-white hover:text-cyan-400 transition">Community</a>
        <a href="#" class="nav-link text-sm text-white hover:text-cyan-400 transition">Markets</a>
        <a href="#" class="nav-link text-sm text-white hover:text-cyan-400 transition">Linq AI</a>
        <a href="#" class="nav-link text-sm text-white hover:text-cyan-400 transition">Earnings</a>
        <a href="#" class="nav-link text-sm text-white hover:text-cyan-400 transition">Bookmarks</a>
      </div>
      <!-- Login/Profile always on the far right -->
      <div class="flex items-center space-x-3">
        <a href="login.html" id="authLinkDesktopLogin"
           class="hidden nav-link text-sm nav-link-button text-white bg-cyan-500 hover:bg-cyan-600 px-4 py-2 rounded transition">Login</a>
        <a href="profile.html" id="profileLinkDesktop" class="hidden" title="My Profile">
          <img id="navProfilePic"
               src="https://placehold.co/40x40/2C2F33/EAEAEA?text=U"
               alt="User"
               class="rounded-full w-9 h-9 object-cover border-2 border-white"
               onerror="this.src='https://placehold.co/40x40/2C2F33/EAEAEA?text=U';">
        </a>
      </div>
    </div>
  </nav>
  <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-auth.js"></script>
  <script>
    // Initialize Firebase (replace with your config)
    const firebaseConfig = {
      // Your Firebase config here
    };
    
    // Initialize Firebase if config exists
    if (firebaseConfig && Object.keys(firebaseConfig).length > 0) {
      firebase.initializeApp(firebaseConfig);
    }

    // Simulate "logged in" with a static image for test
    const loginBtn = document.getElementById('authLinkDesktopLogin');
    const profileLink = document.getElementById('profileLinkDesktop');
    const profilePic = document.getElementById('navProfilePic');
    const PRELOADED_PROFILE_PHOTO = "https://randomuser.me/api/portraits/men/1.jpg";
    
    function showCorrectNav(isLoggedIn) {
      console.log('showCorrectNav called with:', isLoggedIn);
      // Always hide both first
      loginBtn.classList.add('hidden');
      profileLink.classList.add('hidden');
      
      if (isLoggedIn) {
        console.log('Showing profile picture');
        profileLink.classList.remove('hidden');
        // Set profile picture with error handling
        profilePic.src = PRELOADED_PROFILE_PHOTO;
        profilePic.onerror = function() {
          console.log('Profile picture failed to load, using fallback');
          this.src = "https://placehold.co/40x40/2C2F33/EAEAEA?text=U";
        };
      } else {
        console.log('Showing login button');
        loginBtn.classList.remove('hidden');
        profilePic.src = "https://placehold.co/40x40/2C2F33/EAEAEA?text=U";
      }
    }
    
    // For testing purposes, let's show the profile picture by default
    // Remove this line when Firebase is properly configured
    console.log('Setting default state to logged in');
    showCorrectNav(true);
    
    // Firebase auth state change listener
    if (window.firebase && firebase.auth) {
      firebase.auth().onAuthStateChanged(function(user) {
        console.log('Firebase auth state changed:', user ? 'logged in' : 'logged out');
        if (user) {
          showCorrectNav(true);
        } else {
          showCorrectNav(false);
        }
      });
    }
  </script>
</body>
</html>
